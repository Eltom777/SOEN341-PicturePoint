(this.webpackJsonppicturepoint=this.webpackJsonppicturepoint||[]).push([[0],{100:function(e,t,a){},147:function(e,t,a){e.exports=a(177)},152:function(e,t,a){},170:function(e,t){e.exports={apiKey:"AIzaSyDTSp-jysKsVYkvrlOjAJBqZoU4GsjG-nk",authDomain:"picturepoint-381cf.firebaseapp.com",databaseURL:"https://picturepoint-381cf.firebaseio.com",projectId:"picturepoint-381cf",storageBucket:"picturepoint-381cf.appspot.com",messagingSenderId:"370534118114",appId:"1:370534118114:web:5025cb108da80915c564bb",measurementId:"G-8LPREMPPKG"}},177:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"doCreateUserWithEmailAndPassword",(function(){return b})),a.d(n,"doSignInWithEmailAndPassword",(function(){return g})),a.d(n,"doSignOut",(function(){return E})),a.d(n,"doPasswordReset",(function(){return v})),a.d(n,"doPasswordUpdate",(function(){return y})),a.d(n,"doEmailUpdate",(function(){return w})),a.d(n,"doNickNameUpdate",(function(){return O})),a.d(n,"doBioUpdate",(function(){return j}));var r=a(0),o=a.n(r),c=a(20),l=a.n(c),i=(a(152),a(16)),u=a(15),s=a(12),m=a(18),f=a(17),d=a(10),p=o.a.createContext(null),h=a(9),b=function(e,t,a,n,r){h.db.doc("/users/".concat(n)).get().then((function(o){if(o.exists)throw"username already taken";h.auth.createUserWithEmailAndPassword(e,t).then((function(t){r(h.db.collection("users").doc(n).set({username:n,name:a,email:e,creationDate:(new Date).toISOString(),bio:"This is a bio",userID:t.user.uid}))})).catch((function(e){alert(e.message),r(0)}))})).catch((function(e){alert(e),r(1)}))},g=function(e,t){return h.auth.signInWithEmailAndPassword(e,t)},E=function(){return h.auth.signOut().then((function(){return localStorage.removeItem("username")}))},v=function(e){return h.auth.sendPasswordResetEmail(e).then((function(){})).catch((function(e){}))},y=function(e){return h.auth.currentUser.updatePassword(e)},w=function(e){return h.auth.currentUser.updateEmail(e).then(h.db.collection("users").doc(localStorage.getItem("username")).update({email:e}))},O=function(e){return h.db.collection("users").doc(localStorage.getItem("username")).update({name:e})},j=function(e){return h.db.collection("users").doc(localStorage.getItem("username")).update({bio:e})};function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var k=function(e){return function(t){Object(m.a)(r,t);var a,n=(a=r,function(){var e,t=Object(d.a)(a);if(S()){var n=Object(d.a)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Object(f.a)(this,e)});function r(e){var t;return Object(u.a)(this,r),(t=n.call(this,e)).state={authUser:null},t}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this;h.auth.onAuthStateChanged((function(t){t?e.setState((function(){return{authUser:t}})):e.setState((function(){return{authUser:null}}))}))}},{key:"render",value:function(){var t=this.state.authUser;return(o.a.createElement(p.Provider,{value:t},o.a.createElement(e,null)))}}]),r}(o.a.Component)},R=a(52),C=a(6),D=a(14),x=a(30),N=a(213),I=a(219),P=a(220),U=a(54),F=a(221),L=a(79),A=a.n(L),T=a(240),B=a(215),W=a(216),G=a(217),M=a(218),z=a(106),_=a.n(z),H=Object(N.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,fontFamily:"Yu Gothic UI"},list:{width:250}}}));var K=function(){var e,t=H(),a=o.a.useState({left:!1}),n=Object(x.a)(a,2),r=n[0],c=n[1],l=function(e,t){return function(a){("keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key)&&c(Object(D.a)({},r,Object(C.a)({},e,t)))}};return o.a.createElement("div",{className:t.root},o.a.createElement(I.a,{position:"static"},o.a.createElement(P.a,null,o.a.createElement(F.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:l("left",!0)},o.a.createElement(A.a,null)),o.a.createElement(T.a,{open:r.left,onClose:l("left",!1)},(e="left",o.a.createElement("div",{className:t.list,role:"presentation",onClick:l(e,!1),onKeyDown:l(e,!1)},o.a.createElement(B.a,null,o.a.createElement(W.a,{button:!0,component:i.b,to:"/"},o.a.createElement(G.a,null,o.a.createElement(_.a,null)),o.a.createElement(M.a,null,"Sign In")))))),o.a.createElement("img",{src:"https://firebasestorage.googleapis.com/v0/b/picturepoint-381cf.appspot.com/o/Logo.png?alt=media&token=d41e7cc5-9831-4fb3-b4f1-c185e7832fff",width:"55",height:"35"}),o.a.createElement(U.a,{variant:"h3",className:t.title},"Picture Point"))))},J=a(9).db,Y=a(11),q=a(241),V=a(110),Z=a.n(V),Q=a(108),X=a.n(Q),$=a(107),ee=a.n($),te=a(109),ae=a.n(te),ne=Object(N.a)((function(e){return{root:{flexGrow:1},search:Object(C.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Y.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Y.c)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(C.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,fontFamily:"Yu Gothic UI"},list:{width:250}}}));var re=function(){var e,t=ne(),a=!1,c=Object(r.useState)({left:!1}),l=Object(x.a)(c,2),u=l[0],s=l[1],m=function(e,t){return function(a){("keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key)&&s(Object(D.a)({},u,Object(C.a)({},e,t)))}};return o.a.createElement("div",{className:t.root},o.a.createElement(I.a,{position:"static"},o.a.createElement(P.a,null,o.a.createElement(F.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:m("left",!0)},o.a.createElement(A.a,null)),o.a.createElement(T.a,{open:u.left,onClose:m("left",!1)},(e="left",o.a.createElement("div",{className:t.list,role:"presentation",onClick:m(e,!1),onKeyDown:m(e,!1)},o.a.createElement(B.a,null,o.a.createElement(W.a,{button:!0,component:i.b,to:"/".concat(localStorage.getItem("username"))},o.a.createElement(G.a,null,o.a.createElement(ee.a,null)),o.a.createElement(M.a,null,"Home")),o.a.createElement(W.a,{button:!0,component:i.b,to:"/".concat(localStorage.getItem("username"),"/Account")},o.a.createElement(G.a,null,o.a.createElement(X.a,null)),o.a.createElement(M.a,null,"Account")),o.a.createElement(W.a,{button:!0,onClick:n.doSignOut,component:i.b,to:"/"},o.a.createElement(G.a,null,o.a.createElement(ae.a,null)),o.a.createElement(M.a,null,"Logout")))))),o.a.createElement("img",{src:"https://firebasestorage.googleapis.com/v0/b/picturepoint-381cf.appspot.com/o/Logo.png?alt=media&token=d41e7cc5-9831-4fb3-b4f1-c185e7832fff",width:"55",height:"35"}),o.a.createElement(U.a,{variant:"h3",className:t.title},"Picture Point"),o.a.createElement("div",{className:t.search},o.a.createElement("div",{className:t.searchIcon},o.a.createElement(Z.a,null)),o.a.createElement("form",{onSubmit:function(e){var t,n;e.preventDefault(),t=u.username,n=function(e){e?(a=!0,window.open("/".concat(u.username),"_self")):(a=!1,alert("No results found."))},J.collection("users").doc(t).onSnapshot((function(e){e.exists?n(!0):n(!1)})),s({username:""})}},o.a.createElement(q.a,{name:"username",placeholder:"Search\u2026",classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"},value:u.username,onChange:function(e){s(Object(C.a)({},e.target.name,e.target.value))},disabled:a}))))))};a(100);function oe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ce=function(e,t){return function(){return Object(C.a)({},e,t)}},le={email:"",error:null,success:!1},ie=function(e){Object(m.a)(r,e);var t,a=(t=r,function(){var e,a=Object(d.a)(t);if(oe()){var n=Object(d.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(f.a)(this,e)});function r(e){var t;return Object(u.a)(this,r),(t=a.call(this,e)).onSubmit=function(e){var a=t.state.email;n.doPasswordReset(a).then((function(){sessionStorage.setItem("email",a),t.setState((function(){return Object(D.a)({},le,{success:!0})}))})).catch((function(e){t.setState((function(){return Object(D.a)({},le)})),t.setState(ce("error",e))})),e.preventDefault()},t.state=Object(D.a)({},le),t}return Object(s.a)(r,[{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.error,r=t.success,c=""===a;return o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement("input",{value:this.state.email,onChange:function(t){return e.setState(ce("email",t.target.value))},type:"email",placeholder:"Email Address",autoFocus:!0}),o.a.createElement("button",{disabled:c,type:"submit"},"Reset My Password"),n&&o.a.createElement("p",null,n.message),r&&o.a.createElement("p",null,"Email sent successfully to"," ",sessionStorage.getItem("email")))}}]),r}(r.Component),ue=function(){return o.a.createElement("p",null,o.a.createElement(i.b,{to:"/pw-forget"},"Forgot Password?"))},se=function(){return o.a.createElement("div",{align:"center"},o.a.createElement("h1",null,"PasswordForget"),o.a.createElement(ie,null))},me=a(236),fe=a(224),de=a(9).db;function pe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var he=function(e,t){return function(){return Object(C.a)({},e,t)}},be={email:"",password:"",error:null},ge=function(e){Object(m.a)(r,e);var t,a=(t=r,function(){var e,a=Object(d.a)(t);if(pe()){var n=Object(d.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(f.a)(this,e)});function r(e){var t;return Object(u.a)(this,r),(t=a.call(this,e)).onSubmit=function(e){var a=t.state,r=a.email,o=a.password,c=t.props.history;n.doSignInWithEmailAndPassword(r,o).then((function(){!function(e,t){de.collection("users").where("email","==",e).get().then((function(e){t(e.docs[0].data())})).catch((function(e){console.log("Error: ",e)}))}(t.state.email,(function(e){t.setState((function(){return Object(D.a)({},be)})),localStorage.setItem("username",e.username),c.push("/".concat(e.username))}))})).catch((function(e){t.setState(he("error",e))})),e.preventDefault()},t.state=Object(D.a)({},be),t}return Object(s.a)(r,[{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password,r=t.error,c=""===n||""===a;return o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement(me.a,{name:"Email",label:"Email",id:"standard-secondary",value:a,onChange:function(t){return e.setState(he("email",t.target.value))}}),o.a.createElement("br",null),o.a.createElement(me.a,{name:"Password",type:"password",id:"standard-secondary",label:"Password",color:"primary",value:n,onChange:function(t){return e.setState(he("password",t.target.value))}}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(fe.a,{type:"submit",disabled:c,variant:"contained",color:"primary"},"Sign In"),r&&o.a.createElement("p",{style:{color:"red"}},r.message))}}]),r}(r.Component),Ee=function(){return o.a.createElement("p",null,"Already have an account?",o.a.createElement("br",null),o.a.createElement(i.b,{to:"/"},"Sign In"))},ve=function(e){var t=e.history;return(o.a.createElement("div",{align:"center",className:"SignInBox"},o.a.createElement("h2",null,"SignIn"),o.a.createElement(ge,{history:t}),o.a.createElement(ue,null),o.a.createElement(Se,null)))};function ye(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var we={username:"",name:"",email:"",passwordOne:"",passwordTwo:"",error:null},Oe=function(e,t){return function(){return Object(C.a)({},e,t)}},je=function(e){Object(m.a)(r,e);var t,a=(t=r,function(){var e,a=Object(d.a)(t);if(ye()){var n=Object(d.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(f.a)(this,e)});function r(){var e;Object(u.a)(this,r);for(var t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).state=Object(D.a)({},we),e.onSubmit=function(t){t.preventDefault();var a=e.state,r=a.email,o=a.passwordOne,c=a.name,l=a.username;n.doCreateUserWithEmailAndPassword(r,o,c,l,(function(t){0==t?(e.setState((function(){return{email:"",error:"invalid email"}})),e.props.history.push("/signup")):1==t?(e.setState((function(){return{username:"",error:"invalid username"}})),e.props.history.push("/signup")):(e.setState((function(){return Object(D.a)({},we)})),localStorage.setItem("username",l),e.props.history.push("/".concat(l)))}))},e}return Object(s.a)(r,[{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.name,r=t.email,c=t.passwordOne,l=t.passwordTwo,i=t.error,u=c!==l||""===c||""===r||""===n||""===a;return o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement(me.a,{name:"Username",id:"standard-secondary",label:"User name",color:"primary",value:a,onChange:function(t){return e.setState(Oe("username",t.target.value))},type:"text"}),o.a.createElement("br",null),o.a.createElement(me.a,{name:"name",value:n,id:"standard-secondary",label:"Full name",color:"primary",onChange:function(t){return e.setState(Oe("name",t.target.value))},type:"text"}),o.a.createElement("br",null),o.a.createElement(me.a,{name:"email",value:r,id:"standard-secondary",label:"Email Address",color:"primary",onChange:function(t){return e.setState(Oe("email",t.target.value))},type:"email"}),o.a.createElement("br",null),o.a.createElement(me.a,{name:"password",value:c,id:"standard-secondary",label:"Password",color:"primary",onChange:function(t){return e.setState(Oe("passwordOne",t.target.value))},type:"password"}),o.a.createElement("br",null),o.a.createElement(me.a,{name:"ConfirmPassword",value:l,id:"standard-secondary",label:"Comfirm Password",color:"primary",onChange:function(t){return e.setState(Oe("passwordTwo",t.target.value))},type:"password"}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(fe.a,{type:"submit",disabled:u,variant:"contained",color:"primary"},"Sign Up"),i&&o.a.createElement("p",{style:{color:"red"}},i.message))}}]),r}(r.Component),Se=function(){return o.a.createElement("p",null,"Don't have an account? ",o.a.createElement(i.b,{to:"/signup"},"Sign Up"))},ke=function(e){var t=e.history;return(o.a.createElement("div",{align:"center",className:"SignUpBox"},o.a.createElement("h1",null,"SignUp"),o.a.createElement(je,{history:t}),o.a.createElement(Ee,null)))};var Re=function(){return o.a.createElement("div",null,o.a.createElement(R.a,{exact:!0,path:"/signup",component:ke}),o.a.createElement(R.a,{exact:!0,path:"/",component:ve}),o.a.createElement(R.a,{exact:!0,path:"/pw-forget",component:se}))},Ce=a(9).db,De=a(9).db,xe=a(227),Ne=a(226),Ie=a(228),Pe=a(237),Ue=a(243),Fe=a(225),Le=a(111),Ae=a.n(Le);function Te(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Be=function(e){Object(m.a)(n,e);var t,a=(t=n,function(){var e,a=Object(d.a)(t);if(Te()){var n=Object(d.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(f.a)(this,e)});function n(e){var t;return Object(u.a)(this,n),(t=a.call(this,e)).updateIsFollowing=function(){console.log("mounted"),h.db.collection("links").get().then((function(e){e.forEach((function(e){e.data().following==localStorage.getItem("username")&&e.data().followed==t.props.username&&t.setState({isFollowing:!0})})),console.log(e)})).catch((function(e){return console.log(e)}))},t.removeLink=function(){h.db.collection("links").get().then((function(e){e.forEach((function(e){if(e.data().following==localStorage.getItem("username")&&e.data().followed==t.props.username){var a=e.id;h.db.collection("links").doc(a).delete()}})),console.log(e)})).catch((function(e){return console.log(e)})),t.setState({isFollowing:!1})},t.addLink=function(){h.db.collection("links").add({followed:t.props.username,following:localStorage.getItem("username")}),t.setState({isFollowing:!0})},t.state={isFollowing:!1},console.log(t.props.username),t.updateIsFollowing(),t}return Object(s.a)(n,[{key:"render",value:function(){var e;return e=this.state.isFollowing?o.a.createElement("div",{className:"UnfollowUser"},o.a.createElement(fe.a,{onClick:this.removeLink,variant:"contained",color:"secondary.secondary"},"UNFOLLOW")):o.a.createElement("div",{className:"FollowUser"},o.a.createElement(fe.a,{onClick:this.addLink,variant:"contained",color:"primary"},"FOLLOW")),o.a.createElement("div",null,e)}}]),n}(o.a.Component),We=Object(N.a)({card:{width:720,backgroundColor:"white",padding:3,marginTop:30,marginBottom:10},cardContent:{width:470},avatar:{marginTop:30,marginRight:10},avatarSize:{marginLeft:3,width:"80px",height:"80px"},posBottom:{marginTop:20},editIcon:{marginTop:3,marginLeft:52},followButton:{width:100,marginTop:2}});var Ge=function(e){var t,a=We(),n=e.currentUser,r=new Date(n.creationDate);return t=e.isCurrentUser?o.a.createElement(Fe.a,{className:a.editIcon,size:"small",color:"secondary","aria-label":"edit",component:i.b,to:"/".concat(localStorage.getItem("username"),"/Account")},o.a.createElement(Ae.a,null)):o.a.createElement(Be,{username:n.username}),o.a.createElement("div",null,o.a.createElement(Pe.a,{display:"flex",justifyContent:"center"},o.a.createElement(Ne.a,{className:a.card},o.a.createElement(xe.a,{container:!0},o.a.createElement(xe.a,{item:!0,className:a.avatar},o.a.createElement(Ue.a,{className:a.avatarSize},null)),o.a.createElement(xe.a,{item:!0},o.a.createElement(Ie.a,{className:a.cardContent},o.a.createElement(U.a,{variant:"h3",color:"inherit"},n.username),o.a.createElement(U.a,{variant:"h5"},n.name),o.a.createElement(U.a,{variant:"body1",gutterBottom:!0},n.email),o.a.createElement(U.a,{variant:"body1",component:"p"},n.bio),o.a.createElement(U.a,{className:a.posBottom,variant:"body2",color:"textSecondary"},"Member since"," ",r.toLocaleString("en-US",{day:"numeric",month:"long",year:"numeric"})))),o.a.createElement(xe.a,{item:!0},t)))))},Me=a(126),ze=a(238),_e=a(229),He=a(230),Ke=Object(N.a)({root:{flexGrow:1},taskbar:{backgroundColor:"#F5F5F5"},tabs:{backgroundColor:"white"},divider:{width:1e3,position:"absolute",left:"23%",right:"77%"}});var Je=function(e){var t,a=Ke();t="Friends"===e.state?0:1;var n=Object(r.useState)(t),c=Object(x.a)(n,2),l=c[0],u=c[1];return o.a.createElement("div",null,o.a.createElement(Me.a,{className:a.root,elevation:0},o.a.createElement(ze.a,{className:a.taskbar,value:l,onChange:function(e,t){u(t)},indicatorColor:"primary",textColor:"primary",centered:!0},o.a.createElement(_e.a,{label:"My Friends",component:i.b,to:"/".concat(e.username,"/Friends")}),o.a.createElement(_e.a,{label:"My Photos",component:i.b,to:"/".concat(e.username)}))),o.a.createElement(He.a,{className:a.divider,variant:"middle"}))},Ye=a(231);function qe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ve=function(e){Object(m.a)(n,e);var t,a=(t=n,function(){var e,a=Object(d.a)(t);if(qe()){var n=Object(d.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(f.a)(this,e)});function n(){var e;Object(u.a)(this,n);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={followers:null},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("mounted"),h.db.collection("links").onSnapshot((function(t){var a=[];t.forEach((function(t){if(t.data().followed==e.props.username){var n=t.data();a.push(n)}})),e.setState({followers:a}),console.log(t)}))}},{key:"render",value:function(){return o.a.createElement("div",null,this.state.followers&&this.state.followers.map((function(e){return o.a.createElement(r.Fragment,null,o.a.createElement(B.a,{component:"nav"},o.a.createElement(W.a,{button:!0,component:i.b,to:"/".concat(e.following)},o.a.createElement(Ye.a,null,o.a.createElement(Ue.a,null,e.following[0])),o.a.createElement(M.a,{primary:e.following}))))})))}}]),n}(o.a.Component);function Ze(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Qe=function(e){Object(m.a)(n,e);var t,a=(t=n,function(){var e,a=Object(d.a)(t);if(Ze()){var n=Object(d.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(f.a)(this,e)});function n(){var e;Object(u.a)(this,n);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={followings:null},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("mounted"),h.db.collection("links").onSnapshot((function(t){var a=[];t.forEach((function(t){if(t.data().following==e.props.username){var n=t.data();a.push(n)}})),e.setState({followings:a}),console.log(t)}))}},{key:"render",value:function(){return o.a.createElement("div",null,this.state.followings&&this.state.followings.map((function(e){return o.a.createElement(r.Fragment,null,o.a.createElement(B.a,{component:"nav"},o.a.createElement(W.a,{button:!0,component:i.b,to:"/".concat(e.followed)},o.a.createElement(Ye.a,null,o.a.createElement(Ue.a,null,e.followed[0])),o.a.createElement(M.a,{primary:e.followed}))))})))}}]),n}(o.a.Component),Xe=Object(N.a)({paper:{padding:10,marginTop:20,marginLeft:20,marginRight:20,marginBottom:20,minHeight:515,overflow:"auto"},avatarSize:{fontSize:"20px",width:"40px",height:"40px"}});var $e=function(e){var t=Xe();return(o.a.createElement("div",null,o.a.createElement(Pe.a,null,o.a.createElement(xe.a,{container:!0},o.a.createElement(xe.a,{item:!0,xs:!0},o.a.createElement(Me.a,{className:t.paper,elevation:3},o.a.createElement(U.a,{variant:"h4",align:"center"},"Followers"),o.a.createElement(Ve,{username:e.username}))),o.a.createElement(xe.a,{item:!0,xs:!0},o.a.createElement(Me.a,{className:t.paper,elevation:3},o.a.createElement(U.a,{variant:"h4",align:"center"},"Following"),o.a.createElement(Qe,{username:e.username})))))))},et=a(232),tt=a(233),at=Object(N.a)({paper:{padding:10,marginTop:10,marginLeft:20,marginRight:20,marginBottom:20,minHeight:500,width:900},paperImage:{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly"},card:{marginTop:10,height:240,width:240},image:{height:240,width:240}});var nt=function(e){var t,a=at(),n=e.photos;return t=e.isCurrentUser?o.a.createElement(fe.a,{className:a.followButton,variant:"contained",color:"primary",component:i.b,to:"/".concat(e.username,"/Photos/AddPhoto")},"Upload an image"):null,o.a.createElement("div",null,o.a.createElement(Pe.a,{display:"flex",justifyContent:"center"},o.a.createElement(Me.a,{className:a.paper,elevation:3},o.a.createElement(xe.a,{container:!0},o.a.createElement(xe.a,{item:!0,xs:!0}),o.a.createElement(xe.a,{item:!0},t)),o.a.createElement(Me.a,{className:a.paperImage,elevation:0},n.map((function(t){return o.a.createElement(Ne.a,{className:a.card},o.a.createElement(et.a,{component:i.b,to:"/".concat(e.username,"/Photos/").concat(t.photoID)},o.a.createElement(tt.a,{className:a.image,image:t.imageUrl})))}))))))},rt=a(31),ot=a.n(rt),ct=a(81),lt=a(89),it=a.n(lt),ut=a(112),st=a.n(ut),mt=a(9).db,ft=function(e,t){mt.collection("photos").doc(e).onSnapshot((function(e){t(e.data())}))},dt=a(9).db,pt=function(e,t){dt.collection("comments").orderBy("createdAt","desc").where("photo_id","==",e).onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object(D.a)({},e.data()))})),t(a)}))},ht=a(9).db,bt=function(e,t,a){ht.collection("likes").where("photo","==",e).get().then((function(e){var n=!1;e.forEach((function(e){e.data().user===t&&(n=!0)})),a(n)})).catch((function(e){console.log("Error: ",e)}))},gt=a(9).db,Et=a(9).db,vt=h.storage.ref(),yt=a(234),wt=a(90),Ot=a.n(wt),jt=a(113),St=a.n(jt),kt=a(40),Rt=a(9).db;function Ct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Dt=function(e){Object(m.a)(n,e);var t,a=(t=n,function(){var e,a=Object(d.a)(t);if(Ct()){var n=Object(d.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(f.a)(this,e)});function n(e){var t;return Object(u.a)(this,n),(t=a.call(this,e)).state={body:""},t.handleSubmit=t.handleSubmit.bind(Object(kt.a)(t)),t.handleChange=t.handleChange.bind(Object(kt.a)(t)),t}return Object(s.a)(n,[{key:"handleSubmit",value:function(e){e.preventDefault(),function(e,t){""===e.body.trim()?(console.log("Must not be empty"),t(!1)):(Rt.collection("comments").add(e),t(!0))}({body:this.state.body,username:this.props.username,photo_id:this.props.photoID,createdAt:(new Date).toISOString()},(function(e){})),this.setState({body:""})}},{key:"handleChange",value:function(e){this.setState(Object(C.a)({},e.target.name,e.target.value))}},{key:"isInvalid",value:function(){return this.state.body.length>200||""===this.state.body}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement(me.a,{className:"commentField",name:"body",id:"outlined-comment",label:"Add a comment...",color:"primary",variant:"outlined",value:this.state.body,onChange:this.handleChange,fullWidth:!0}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(fe.a,{type:"submit",disabled:this.isInvalid(),variant:"contained",color:"primary"},"Post")))}}]),n}(r.Component),xt=Object(N.a)({paper:{marginTop:10,marginLeft:20,marginRight:20,marginBottom:20,minHeight:500,display:"flex",justifyContent:"center"},card:{backgroundColor:"white",height:"auto",width:1200},cardContent:{width:480},comments:{marginTop:5,maxHeight:500,overflow:"auto"},image:{height:720,width:720},caption:{marginBottom:15}});var Nt=function(e){var t,a,n=e.match,c=xt(),l=Object(r.useState)({isLiked:!1}),i=Object(x.a)(l,2),u=i[0],s=i[1],m=Object(r.useState)({}),f=Object(x.a)(m,2),d=f[0],p=f[1],b=Object(r.useState)([]),g=Object(x.a)(b,2),E=g[0],v=g[1],y=n.params.id,w=localStorage.getItem("username"),O=new Date(d.creationDate);it.a.extend(st.a),Object(r.useEffect)((function(){j(),S(),k()}),[]);var j=function(){var e=Object(ct.a)(ot.a.mark((function e(){return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ft(y,(function(e){p(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(ct.a)(ot.a.mark((function e(){return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pt(y,(function(e){v(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(ct.a)(ot.a.mark((function e(){return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bt(y,w,(function(e){s({isLiked:e})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t=u.isLiked?o.a.createElement(F.a,{"aria-label":"unlike",align:"left",onClick:function(e){e.preventDefault(),function(e,t,a){Et.collection("likes").where("photo","==",e).get().then((function(e){e.forEach((function(e){e.data().user===t&&Et.collection("likes").doc(e.id).delete()}))})).catch((function(e){console.log("Error: ",e)})),Et.collection("photos").doc(e).update({likes:a.likes-1})}(y,w,d),s({isLiked:!1})}},o.a.createElement(Ot.a,{color:"secondary"}),o.a.createElement(U.a,null,d.likes)):o.a.createElement(F.a,{"aria-label":"like",align:"left",onClick:function(e){e.preventDefault(),function(e,t,a){gt.collection("likes").add(e),gt.collection("photos").doc(t).update({likes:a.likes+1})}({photo:y,user:w},y,d),s({isLiked:!0})}},o.a.createElement(Ot.a,{color:"default"}),o.a.createElement(U.a,null,d.likes)),a=w===n.params.username?o.a.createElement(F.a,{"aria-label":"delete",align:"right",onClick:function(e){e.preventDefault(),function(e,t){try{h.db.collection("photos").doc(e).delete(),h.db.collection("comments").where("photo_id","==",e).get().then((function(e){if(e.empty)console.log("No matching comment documents.");else{var t=h.db.batch();e.forEach((function(e){t.delete(e.ref)})),t.commit()}})).catch((function(e){throw e})),h.db.collection("likes").where("photo","==",e).get().then((function(e){if(e.empty)console.log("No matching likes documents.");else{var t=h.db.batch();e.forEach((function(e){t.delete(e.ref)})),t.commit()}})).catch((function(e){throw e})),vt.child(e).delete().then((function(){t(e+" successfully deleted")})).catch((function(e){throw e}))}catch(a){t(a)}}(y,(function(e){alert(e)})),window.open("/".concat(w),"_self")}},o.a.createElement(St.a,{color:"secondary"})):null,o.a.createElement("div",null,o.a.createElement(Pe.a,{display:"flex",justifyContent:"center"},o.a.createElement(Me.a,{className:c.paper},o.a.createElement(Ne.a,{className:c.card},o.a.createElement(xe.a,{container:!0},o.a.createElement(xe.a,{item:!0},o.a.createElement(tt.a,{className:c.image,image:d.imageUrl}),t),o.a.createElement(xe.a,{item:!0,className:c.cardContent},o.a.createElement(yt.a,{avatar:o.a.createElement(Ue.a,null,null),title:d.user,subheader:O.toLocaleString("en-US",{day:"numeric",month:"long",year:"numeric"}),action:a}),o.a.createElement(Ie.a,null,o.a.createElement(U.a,{className:c.caption,variant:"body1",color:"",component:"p",align:"left"},d.caption),o.a.createElement(Dt,{username:w,photoID:y}),o.a.createElement(Pe.a,{className:c.comments},E.map((function(e){return o.a.createElement(r.Fragment,null,o.a.createElement(B.a,{component:"nav"},o.a.createElement(W.a,null,o.a.createElement(Ye.a,null,o.a.createElement(Ue.a,null)),o.a.createElement(M.a,{primary:e.username,secondary:o.a.createElement(r.Fragment,null,o.a.createElement(U.a,{variant:"body1"},e.body),o.a.createElement(U.a,{variant:"subtitle2",align:"right"},it()(e.createdAt).fromNow()))})),o.a.createElement(He.a,{variant:"fullWidth",component:"li"})))}))))))))))},It=a(125),Pt=function e(t,a){a(Math.round(1e12*Math.random()).toString()),h.db.collection("photos").doc(a+"."+t).get().then((function(n){n.exists&&(console.log("Image already exists, generating a new image name"),e(t,(function(e){a(e)})))})).catch((function(e){console.log("Error: ",e)}))},Ut=a(181);function Ft(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Lt="image/x-png, image/png, image/jpg, image/jpeg".split(",").map((function(e){return e.trim()})),At=function(e){Object(m.a)(n,e);var t,a=(t=n,function(){var e,a=Object(d.a)(t);if(Ft()){var n=Object(d.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(f.a)(this,e)});function n(e){var t;return Object(u.a)(this,n),(t=a.call(this,e)).handleCaption=function(e){t.setState({caption:e.target.value})},t.SubmitPicture=function(e){e.preventDefault(),function(e,t,a){var n,r=e.name.split(".")[e.name.split(".").length-1];Pt(r,(function(e){n=e+"."+r})),console.log(n);var o=h.storage.ref().child(n).put(e);o.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done")}),(function(e){console.log("Error",e),a(null)}),(function(){o.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),h.db.collection("/photos").doc(n).set({imageUrl:e,caption:t,user:localStorage.getItem("username"),creationDate:(new Date).toISOString(),likes:0}),a(n)}))}))}(t.state.file,t.state.caption,(function(e){null!=e?t.setState({isUploaded:e}):t.setState({error:"Internal server error ! Check console"})}))},t.handleOnDrop=function(e){var a=e[0],n=new FileReader;n.addEventListener("load",(function(){console.log(n.result);var e=n.result;t.setState({imgSrc:e,file:a})}),!1),n.readAsDataURL(a)},t.state={imgSrc:null,caption:"",file:null,isUploaded:null,error:null},t}return Object(s.a)(n,[{key:"render",value:function(){var e=this.state,t=e.imgSrc,a=e.file,n=e.isUploaded,r=e.error,c=this.props.classes,l=null==a;return o.a.createElement("div",null,o.a.createElement(Pe.a,{display:"flex",justifyContent:"center"},o.a.createElement(Me.a,{className:c.paper,elevation:3},o.a.createElement(xe.a,{container:!0,className:"marginTop: 10",xs:10},o.a.createElement(U.a,{variant:"h6",color:"inherit"},"Preview:")),o.a.createElement(xe.a,{container:!0,className:"marginTop: inherit",justify:"center",spacing:5},o.a.createElement(xe.a,{item:!0,className:c.preview,xs:10,sm:5,direction:"column",justify:"center"},null!=t?o.a.createElement("div",null,o.a.createElement(Ne.a,{className:c.card},o.a.createElement(tt.a,{className:c.image,image:t,title:this.state.caption}))):""),o.a.createElement(xe.a,{item:!0,xs:12,sm:6,direction:"column",justify:"center"},o.a.createElement(It.a,{className:c.dropbox,onChange:this.handleOnDrop,showAlerts:!1,acceptedFiles:Lt,filesLimit:1,maxFileSize:2e6,dropzoneText:"Drag'n'Drop an Image or Click !",showPreviewsInDropzone:!1}),o.a.createElement(xe.a,{container:!0,item:!0,justify:"center"},o.a.createElement(me.a,{id:"Caption",label:"Caption",onChange:this.handleCaption}))),o.a.createElement(xe.a,{container:!0,item:!0,xs:12,spacing:5,justify:"center"},null!=n?o.a.createElement("p",{style:{color:"green"}},'"'.concat(a.name,'" was successfully uploaded')):"",null!=r?o.a.createElement("p",{style:{color:"red"}},r):""),o.a.createElement(xe.a,{container:!0,item:!0,className:"marginTop: 10",xs:12,spacing:5,justify:"center"},o.a.createElement(fe.a,{disabled:l,variant:"contained",color:"primary",onClick:this.SubmitPicture},"Upload"))))))}}]),n}(r.Component),Tt=Object(Ut.a)((function(){return{paper:{padding:10,marginTop:20,marginLeft:20,marginRight:20,marginBottom:20,height:500,width:850,backgroundColor:"whitesmoke"},paperImage:{marginTop:10,display:"flex",flexWrap:"wrap",justifyContent:"space-evenly"},card:{height:360,width:360},image:{height:360,width:360},preview:{height:400,width:400}}}))(At);function Bt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Wt=function(e,t){return function(){return Object(C.a)({},e,t)}},Gt={passwordOne:"",passwordTwo:"",error:null},Mt=function(e){Object(m.a)(r,e);var t,a=(t=r,function(){var e,a=Object(d.a)(t);if(Bt()){var n=Object(d.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(f.a)(this,e)});function r(e){var t;return Object(u.a)(this,r),(t=a.call(this,e)).onSubmit=function(e){var a=t.state.passwordOne;n.doPasswordUpdate(a).then((function(){t.setState((function(){return Object(D.a)({},Gt)}))})).catch((function(e){t.setState(Wt("error",e))})),e.preventDefault()},t.state=Object(D.a)({},Gt),t}return Object(s.a)(r,[{key:"render",value:function(){var e=this,t=this.state,a=t.passwordOne,n=t.passwordTwo,r=t.error,c=a!==n||""===a;return o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement(me.a,{name:"PasswordOne",value:a,id:"standard-secondary",label:"New Password",color:"primary",onChange:function(t){return e.setState(Wt("passwordOne",t.target.value))},type:"password"}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(me.a,{name:"PasswordTwo",value:n,id:"standard-secondary",label:"Confirm Password",color:"primary",onChange:function(t){return e.setState(Wt("passwordTwo",t.target.value))},type:"password"}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(fe.a,{type:"submit",disabled:c,variant:"contained",color:"primary"},"Update Password"),r&&o.a.createElement("p",null,r.message))}}]),r}(r.Component);function zt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var _t=function(e,t){return function(){return Object(C.a)({},e,t)}},Ht={email:"",error:null},Kt=function(e){Object(m.a)(n,e);var t,a=(t=n,function(){var e,a=Object(d.a)(t);if(zt()){var n=Object(d.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(f.a)(this,e)});function n(e){var t;return Object(u.a)(this,n),(t=a.call(this,e)).onSubmit=function(e){var a=t.state.email;w(a).then((function(){t.setState((function(){return Object(D.a)({},Ht)}))})).catch((function(e){t.setState(_t("error",e))})),e.preventDefault()},t.state=Object(D.a)({},Ht),t}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.error,r=""===a;return o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement(me.a,{name:"Email",value:a,id:"standard-secondary",label:"New email",color:"primary",onChange:function(t){return e.setState(_t("email",t.target.value))}}),o.a.createElement("br",null),o.a.createElement(fe.a,{type:"submit",disabled:r,variant:"contained",color:"primary"},"Update my Email"),n&&o.a.createElement("p",null,n.message))}}]),n}(r.Component);function Jt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Yt=function(e,t){return function(){return Object(C.a)({},e,t)}},qt={fullname:"",error:null},Vt=function(e){Object(m.a)(n,e);var t,a=(t=n,function(){var e,a=Object(d.a)(t);if(Jt()){var n=Object(d.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(f.a)(this,e)});function n(e){var t;return Object(u.a)(this,n),(t=a.call(this,e)).onSubmit=function(e){var a=t.state.fullname;O(a).then((function(){t.setState((function(){return Object(D.a)({},qt)}))})).catch((function(e){t.setState(Yt("error",e))})),e.preventDefault()},t.state=Object(D.a)({},qt),t}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.state,a=t.fullname,n=t.error,r=""===a;return o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement(me.a,{name:"Fullname",value:a,id:"standard-secondary",label:"New Nick Name",color:"primary",onChange:function(t){return e.setState(Yt("fullname",t.target.value))}}),o.a.createElement("br",null),o.a.createElement(fe.a,{type:"submit",disabled:r,variant:"contained",color:"primary"},"Update Nick Name"),n&&o.a.createElement("p",null,n.message))}}]),n}(r.Component);function Zt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Qt=function(e,t){return function(){return Object(C.a)({},e,t)}},Xt={bio:"",error:null},$t=function(e){Object(m.a)(n,e);var t,a=(t=n,function(){var e,a=Object(d.a)(t);if(Zt()){var n=Object(d.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(f.a)(this,e)});function n(e){var t;return Object(u.a)(this,n),(t=a.call(this,e)).onSubmit=function(e){var a=t.state.bio;j(a).then((function(){t.setState((function(){return Object(D.a)({},Xt)}))})).catch((function(e){t.setState(Qt("error",e))})),e.preventDefault()},t.state=Object(D.a)({},Xt),t}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.state,a=t.bio,n=t.error,r=""===a;return o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement(me.a,{name:"Bio",value:a,id:"standard-secondary",label:"New Bio",color:"primary",onChange:function(t){return e.setState(Qt("bio",t.target.value))}}),o.a.createElement("br",null),o.a.createElement(fe.a,{type:"submit",disabled:r,variant:"contained",color:"primary"},"Update Bio"),n&&o.a.createElement("p",null,n.message))}}]),n}(r.Component),ea=function(){return o.a.createElement(p.Consumer,null,(function(e){return o.a.createElement("div",{align:"center"},o.a.createElement("h1",null,"Account: ",e.email),o.a.createElement(Mt,null),o.a.createElement("br",null),o.a.createElement(Kt,null),o.a.createElement("br",null),o.a.createElement(Vt,null),o.a.createElement("br",null),o.a.createElement($t,null))}))};function ta(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var aa=function(e){Object(m.a)(n,e);var t,a=(t=n,function(){var e,a=Object(d.a)(t);if(ta()){var n=Object(d.a)(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(f.a)(this,e)});function n(e){var t;return Object(u.a)(this,n),(t=a.call(this,e)).render=function(){var e=this;if(!1===this.state.ready)return o.a.createElement("div",null);var t=window.location.pathname.split("/");return(o.a.createElement("div",null,o.a.createElement(Ge,{currentUser:this.state,isCurrentUser:localStorage.getItem("username")===this.state.username}),o.a.createElement(Je,{state:t[t.length-1],username:this.state.username}),o.a.createElement(R.c,null,o.a.createElement(R.a,{exact:!0,path:"/:username/Account",component:ea}),o.a.createElement(R.a,{exact:!0,path:"/:username/Friends",render:function(){return o.a.createElement($e,{username:e.state.username})}}),o.a.createElement(R.a,{exact:!0,path:"/:username",render:function(){return o.a.createElement(nt,{photos:e.state.photos,username:e.state.username,isCurrentUser:localStorage.getItem("username")===e.state.username})}}),o.a.createElement(R.a,{exact:!0,path:"/:username/Photos/AddPhoto",component:Tt}),o.a.createElement(R.a,{exact:!0,path:"/:username/Photos/:id",component:Nt}))))},t.state={ready:!1},t.getUserData(),t}return Object(s.a)(n,[{key:"componentDidUpdate",value:function(){this.props.match.params.username!==this.state.username&&this.getUserData()}},{key:"getUserData",value:function(){var e=this;!function(e,t){Ce.collection("users").doc(e).onSnapshot((function(e){t(e.data())}))}(this.props.match.params.username,(function(t){var a,n;a=e.props.match.params.username,n=function(a){e.setState(Object(D.a)({},t,{photos:a,ready:!0}))},De.collection("photos").where("user","==",a).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(D.a)({},e.data(),{photoID:e.id}))})),n(t)}))}))}}]),n}(r.Component),na=function(){return o.a.createElement("div",null,o.a.createElement(re,null),o.a.createElement(R.a,{path:"/:username",component:aa}))},ra=function(){return o.a.createElement("div",null,o.a.createElement(K,null),o.a.createElement(R.a,{path:"/",component:Re}))},oa=function(){return o.a.createElement(p.Consumer,null,(function(e){return e?o.a.createElement(na,null):o.a.createElement(ra,null)}))},ca=a(124),la=a(235),ia=Object(ca.a)({palette:{primary:{main:"#2a66e7"},secondary:{main:"#ff1744",secondary:"#D3D3D3"}}}),ua=k((function(){return o.a.createElement(la.a,{theme:ia},o.a.createElement(i.a,null,o.a.createElement("div",{className:"App"},o.a.createElement(oa,null))))}));l.a.render(o.a.createElement(ua,null),document.getElementById("root"))},9:function(e,t,a){"use strict";a.r(t),a.d(t,"auth",(function(){return o})),a.d(t,"db",(function(){return c})),a.d(t,"storage",(function(){return l}));a(153);var n=a(157),r=a(170);n.initializeApp(r);var o=n.auth(),c=n.firestore(),l=n.storage()}},[[147,1,2]]]);
//# sourceMappingURL=main.ef51bbc7.chunk.js.map